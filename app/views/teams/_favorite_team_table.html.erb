<div style="width:90%; margin: auto;">
<table id="teamTable" class="table table-striped table-condensed" data-toggle="table" data-sort-name="name">
  <thead>
    <tr>
      <th data-field="photo"></th>
      <th data-field="name" data-sortable="true">Name</th>
      <th data-field="pos" data-sortable="true">Pos</th>

      <% stat_order_arr = [] %>
      <% @team.league.stat_settings.each do |key, val| %>
        <% next if val[:roto_names].nil? %>
        <th data-field="<%= key %>" data-sortable="true"><%= val[:display_name] %></th>
        <% stat_order_arr.push(val[:name]) %>
      <% end %>
    </tr>
  </thead>
  <tbody>
    <% rotoplayers = RotoPlayerSeason.where( 'PlayerID' => @team.rotoplayer_arr, 'Season' => 2016 ) %>
    <% rotoplayers.each_with_index do |rotoplayer, i| %>
      <tr id="tr-id-<%= i %>" class="tr-class-<%= i % 2 %>">
        <td><img class='playerPhoto' src='<%= @team.player_metadata[rotoplayer.PlayerID]['photo'] %>'></td>
        <td id="td-id-<%= i %>" class="td-class-<%= i %>"><%= rotoplayer.Name %></td>
        <td data-field="pos"><%= rotoplayer.Position %></td>

        <% stat_order_arr.each do |stat_id| %>
          <% next if League.yahoo_mappings[stat_id].nil? %>
          <td><%= League.yahoo_mappings[stat_id].reduce(0) { |base, roto_key| base += rotoplayer[roto_key] } %></td>
        <% end %>
      </tr>
    <% end %>
  </tbody>
</table>
</div>
